(()=>{var e={};e.id=98,e.ids=[98],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8893:e=>{"use strict";e.exports=require("buffer")},4770:e=>{"use strict";e.exports=require("crypto")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},3924:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>o.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>l}),s(3389),s(3817),s(5866);var n=s(3191),r=s(8716),i=s(7922),o=s.n(i),a=s(5231),c={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>a[e]);s.d(t,c);let l=["",{children:["auth",{children:["signin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,3389)),"/Users/nico/src/amianai/v2/frontend/src/app/auth/signin/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,3817)),"/Users/nico/src/amianai/v2/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/nico/src/amianai/v2/frontend/src/app/auth/signin/page.tsx"],u="/auth/signin/page",m={require:s,loadChunk:()=>Promise.resolve()},p=new n.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/auth/signin/page",pathname:"/auth/signin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},6407:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},5614:(e,t,s)=>{Promise.resolve().then(s.bind(s,4001))},3085:(e,t,s)=>{Promise.resolve().then(s.bind(s,2091))},2091:(e,t,s)=>{"use strict";s.d(t,{default:()=>d});var n=s(326),r=s(7577),i=s(5047),o=s(4723),a=s(2534),c=s(9580),l=s(4001);function d(){let[e,t]=(0,r.useState)(!1),[s,d]=(0,r.useState)(!1),[u,m]=(0,r.useState)(null),p=(0,i.useRouter)(),{checkAuth:g}=(0,l.a)(),{register:x,handleSubmit:h,formState:{errors:y}}=(0,o.cI)(),v=async e=>{t(!0),m(null);try{await c.Y.signIn(e),await g(),p.push("/")}catch(e){m(e)}finally{t(!1)}};return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,n.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,n.jsxs)("div",{children:[n.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sign in to AmIAnAI"}),n.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Join anonymous conversations with AI"})]}),(0,n.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:h(v),children:[u&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:n.jsx("p",{className:"text-sm text-red-600",children:u.message})}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[n.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),n.jsx("input",{...x("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}}),type:"email",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"your@email.com"}),y.email&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.email.message})]}),(0,n.jsxs)("div",{children:[n.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,n.jsxs)("div",{className:"mt-1 relative",children:[n.jsx("input",{...x("password",{required:"Password is required"}),type:s?"text":"password",className:"block w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"Your password"}),n.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>d(!s),children:s?n.jsx(a.rzC,{className:"h-5 w-5 text-gray-400"}):n.jsx(a.rDJ,{className:"h-5 w-5 text-gray-400"})})]}),y.password&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.password.message})]})]}),n.jsx("div",{children:n.jsx("button",{type:"submit",disabled:e,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:e?"Signing in...":"Sign in"})}),n.jsx("div",{className:"text-center",children:n.jsx("button",{type:"button",onClick:()=>p.push("/auth/signup"),className:"text-primary-600 hover:text-primary-500 text-sm",children:"Don't have an account? Sign up"})})]})]})})}},4001:(e,t,s)=>{"use strict";s.d(t,{AuthProvider:()=>l,a:()=>d});var n=s(326),r=s(7577),i=s(5047),o=s(9580),a=s(9);let c=(0,r.createContext)(void 0),l=({children:e})=>{let[t,s]=(0,r.useState)(!1),[l,d]=(0,r.useState)(!0),[u,m]=(0,r.useState)(null),p=(0,i.useRouter)(),g=async()=>{try{let e=await o.Y.getCurrentUser();e?(s(!0),m(e)):(s(!1),m(null))}catch(e){s(!1),m(null)}finally{d(!1)}};return(0,r.useEffect)(()=>{g()},[]),n.jsx(c.Provider,{value:{isAuthenticated:t,isLoading:l,user:u,checkAuth:g,signOut:()=>{o.Y.signOut(),s(!1),m(null),a.F.getState().reset(),p.push("/auth/signin")}},children:e})},d=()=>{let e=(0,r.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},9580:(e,t,s)=>{"use strict";s.d(t,{Y:()=>i});var n=s(3541);let r=new n.AM({UserPoolId:"us-east-1_ipC2hJAsT",ClientId:"6mvdodv3vud2pi5sv0oig920ne"}),i={signUp:async({email:e,password:t})=>new Promise((s,i)=>{let o=[new n.KC({Name:"email",Value:e})];r.signUp(e,t,o,[],e=>{if(e){i({code:e.code||"UnknownError",message:e.message||"An unknown error occurred"});return}s()})}),confirmSignUp:async(e,t)=>new Promise((s,i)=>{new n.ws({Username:e,Pool:r}).confirmRegistration(t,!0,e=>{if(e){i({code:e.code||"UnknownError",message:e.message||"An unknown error occurred"});return}s()})}),signIn:async({email:e,password:t})=>new Promise((s,i)=>{let o=new n.sD({Username:e,Password:t});new n.ws({Username:e,Pool:r}).authenticateUser(o,{onSuccess:()=>{s()},onFailure:e=>{i({code:e.code||"UnknownError",message:e.message||"An unknown error occurred"})}})}),getCurrentUser:async()=>new Promise(e=>{let t=r.getCurrentUser();if(!t){e(null);return}t.getSession((s,n)=>{if(s||!n||!n.isValid()){e(null);return}t.getUserAttributes((t,s)=>{if(t||!s){e(null);return}let n=s.find(e=>"email"===e.getName())?.getValue(),r=s.find(e=>"sub"===e.getName())?.getValue();if(!n||!r){e(null);return}e({email:n,sub:r,role:"user"})})})}),signOut:()=>{let e=r.getCurrentUser();e&&e.signOut()},getIdToken:async()=>new Promise(e=>{let t=r.getCurrentUser();if(!t){e(null);return}t.getSession((t,s)=>{if(t||!s||!s.isValid()){e(null);return}e(s.getIdToken().getJwtToken())})})}},9:(e,t,s)=>{"use strict";s.d(t,{F:()=>o});var n=s(8408),r=s(5251);let i="wss://i5csamj3a8.execute-api.us-east-1.amazonaws.com/prod",o=(0,n.U)()((0,r.mW)((e,t)=>({connectionStatus:"disconnected",ws:null,sessionId:null,myIdentity:null,participants:[],messages:[],sessionStartTime:null,timeRemaining:null,isSessionActive:!1,isRevealed:!1,identityReveal:null,connect:()=>{let s=t();if(s.ws?.readyState!==WebSocket.OPEN){e({connectionStatus:"connecting"}),console.log("Attempting WebSocket connection to:",i);try{let s=new WebSocket(i);s.onopen=()=>{console.log("✅ WebSocket connected successfully"),e({connectionStatus:"connected",ws:s}),console.log("Sending join message..."),s.send(JSON.stringify({action:"join"}))},s.onmessage=e=>{try{let s=JSON.parse(e.data);switch(console.log("\uD83D\uDCE8 Received:",s),s.action){case"connected":t().handleConnect(s);break;case"message":t().handleMessage(s);break;case"participants":t().handleParticipantUpdate(s.participants);break;case"session_end":t().handleSessionEnd(s.reveal);break;default:console.log("Unknown message:",s)}}catch(e){console.error("Failed to parse message:",e)}},s.onerror=t=>{console.error("❌ WebSocket error:",t),console.error("WebSocket readyState:",s.readyState),e({connectionStatus:"error"})},s.onclose=s=>{console.log("\uD83D\uDD0C WebSocket disconnected. Code:",s.code,"Reason:",s.reason),e({connectionStatus:"disconnected",ws:null}),1e3!==s.code&&(console.log("\uD83D\uDD04 Retrying connection in 3 seconds..."),setTimeout(()=>{let e=t();"disconnected"===e.connectionStatus&&e.connect()},3e3))},setTimeout(()=>{s.readyState===WebSocket.CONNECTING&&(console.error("⏰ WebSocket connection timeout"),s.close(),e({connectionStatus:"error"}))},1e4)}catch(t){console.error("\uD83D\uDCA5 Failed to create WebSocket:",t),e({connectionStatus:"error"})}}},disconnect:()=>{let{ws:s}=t();s&&s.close(),e({connectionStatus:"disconnected",ws:null})},sendMessage:e=>{let{ws:s}=t();s?.readyState===WebSocket.OPEN&&s.send(JSON.stringify({action:"message",content:e.trim()}))},handleConnect:t=>{e({myIdentity:t.identity,sessionId:t.sessionId,sessionStartTime:Date.now(),isSessionActive:!0,timeRemaining:600})},handleMessage:t=>{e(e=>({messages:[...e.messages,t]}))},handleParticipantUpdate:t=>{e({participants:t})},handleSessionEnd:t=>{e({isSessionActive:!1,isRevealed:!0,identityReveal:t,timeRemaining:0})},updateTimer:t=>{e({timeRemaining:t}),t<=0&&e({isSessionActive:!1})},reset:()=>{let{ws:s}=t();s&&s.close(),e({connectionStatus:"disconnected",ws:null,sessionId:null,myIdentity:null,participants:[],messages:[],sessionStartTime:null,timeRemaining:null,isSessionActive:!1,isRevealed:!1,identityReveal:null})}}),{name:"session-store"}))},3389:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var n=s(9510);let r=(0,s(8570).createProxy)(String.raw`/Users/nico/src/amianai/v2/frontend/src/components/auth/SignInForm.tsx#default`);function i(){return n.jsx(r,{})}},3817:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a,metadata:()=>o});var n=s(9510);s(5023);var r=s(8570);let i=(0,r.createProxy)(String.raw`/Users/nico/src/amianai/v2/frontend/src/contexts/AuthContext.tsx#AuthProvider`);(0,r.createProxy)(String.raw`/Users/nico/src/amianai/v2/frontend/src/contexts/AuthContext.tsx#useAuth`);let o={title:"AmIAnAI v2 - 2H+2AI Conversations",description:"Anonymous real-time conversations between 2 humans and 2 AIs"};function a({children:e}){return n.jsx("html",{lang:"en",children:n.jsx("body",{className:"antialiased",children:n.jsx(i,{children:e})})})}},5023:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),n=t.X(0,[288,534,723],()=>s(3924));module.exports=n})();