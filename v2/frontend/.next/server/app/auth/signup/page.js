(()=>{var e={};e.id=271,e.ids=[271],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8893:e=>{"use strict";e.exports=require("buffer")},4770:e=>{"use strict";e.exports=require("crypto")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},953:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>l}),s(2285),s(3817),s(5866);var r=s(3191),n=s(8716),a=s(7922),i=s.n(a),o=s(5231),c={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>o[e]);s.d(t,c);let l=["",{children:["auth",{children:["signup",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,2285)),"/Users/nico/src/amianai/v2/frontend/src/app/auth/signup/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,3817)),"/Users/nico/src/amianai/v2/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/nico/src/amianai/v2/frontend/src/app/auth/signup/page.tsx"],u="/auth/signup/page",m={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/auth/signup/page",pathname:"/auth/signup",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},6407:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},5614:(e,t,s)=>{Promise.resolve().then(s.bind(s,4001))},4639:(e,t,s)=>{Promise.resolve().then(s.bind(s,5363))},5363:(e,t,s)=>{"use strict";s.d(t,{default:()=>l});var r=s(326),n=s(7577),a=s(5047),i=s(4723),o=s(2534),c=s(9580);function l(){let[e,t]=(0,n.useState)(!1),[s,l]=(0,n.useState)(!1),[d,u]=(0,n.useState)(!1),[m,p]=(0,n.useState)(null),[x,g]=(0,n.useState)(!1),h=(0,a.useRouter)(),{register:y,handleSubmit:f,watch:v,formState:{errors:b}}=(0,i.cI)(),w=v("password"),S=async e=>{t(!0),p(null);try{await c.Y.signUp(e),g(!0)}catch(e){p(e)}finally{t(!1)}};return x?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:r.jsx("div",{className:"max-w-md w-full space-y-8",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"mx-auto h-12 w-12 text-green-600 text-4xl",children:"✓"}),r.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Check your email"}),r.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"We've sent a verification link to your email address. Click the link to verify your account."}),r.jsx("button",{onClick:()=>h.push("/auth/signin"),className:"mt-4 text-primary-600 hover:text-primary-500",children:"Back to sign in"})]})})}):r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Create your account"}),r.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Join the conversation with AI"})]}),(0,r.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:f(S),children:[m&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:r.jsx("p",{className:"text-sm text-red-600",children:m.message})}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),r.jsx("input",{...y("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}}),type:"email",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"your@email.com"}),b.email&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.email.message})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,r.jsxs)("div",{className:"mt-1 relative",children:[r.jsx("input",{...y("password",{required:"Password is required",minLength:{value:8,message:"Password must be at least 8 characters"}}),type:s?"text":"password",className:"block w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"Choose a strong password"}),r.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>l(!s),children:s?r.jsx(o.rzC,{className:"h-5 w-5 text-gray-400"}):r.jsx(o.rDJ,{className:"h-5 w-5 text-gray-400"})})]}),b.password&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.password.message})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm password"}),(0,r.jsxs)("div",{className:"mt-1 relative",children:[r.jsx("input",{...y("confirmPassword",{required:"Please confirm your password",validate:e=>e===w||"Passwords do not match"}),type:d?"text":"password",className:"block w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"Confirm your password"}),r.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>u(!d),children:d?r.jsx(o.rzC,{className:"h-5 w-5 text-gray-400"}):r.jsx(o.rDJ,{className:"h-5 w-5 text-gray-400"})})]}),b.confirmPassword&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.confirmPassword.message})]})]}),r.jsx("div",{children:r.jsx("button",{type:"submit",disabled:e,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:e?"Creating account...":"Create account"})}),r.jsx("div",{className:"text-center",children:r.jsx("button",{type:"button",onClick:()=>h.push("/auth/signin"),className:"text-primary-600 hover:text-primary-500 text-sm",children:"Already have an account? Sign in"})})]})]})})}},4001:(e,t,s)=>{"use strict";s.d(t,{AuthProvider:()=>l,a:()=>d});var r=s(326),n=s(7577),a=s(5047),i=s(9580),o=s(9);let c=(0,n.createContext)(void 0),l=({children:e})=>{let[t,s]=(0,n.useState)(!1),[l,d]=(0,n.useState)(!0),[u,m]=(0,n.useState)(null),p=(0,a.useRouter)(),x=async()=>{try{let e=await i.Y.getCurrentUser();e?(s(!0),m(e)):(s(!1),m(null))}catch(e){s(!1),m(null)}finally{d(!1)}};return(0,n.useEffect)(()=>{x()},[]),r.jsx(c.Provider,{value:{isAuthenticated:t,isLoading:l,user:u,checkAuth:x,signOut:()=>{i.Y.signOut(),s(!1),m(null),o.F.getState().reset(),p.push("/auth/signin")}},children:e})},d=()=>{let e=(0,n.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},9580:(e,t,s)=>{"use strict";s.d(t,{Y:()=>a});var r=s(3541);let n=new r.AM({UserPoolId:"us-east-1_ipC2hJAsT",ClientId:"6mvdodv3vud2pi5sv0oig920ne"}),a={signUp:async({email:e,password:t})=>new Promise((s,a)=>{let i=[new r.KC({Name:"email",Value:e})];n.signUp(e,t,i,[],e=>{if(e){a({code:e.code||"UnknownError",message:e.message||"An unknown error occurred"});return}s()})}),confirmSignUp:async(e,t)=>new Promise((s,a)=>{new r.ws({Username:e,Pool:n}).confirmRegistration(t,!0,e=>{if(e){a({code:e.code||"UnknownError",message:e.message||"An unknown error occurred"});return}s()})}),signIn:async({email:e,password:t})=>new Promise((s,a)=>{let i=new r.sD({Username:e,Password:t});new r.ws({Username:e,Pool:n}).authenticateUser(i,{onSuccess:()=>{s()},onFailure:e=>{a({code:e.code||"UnknownError",message:e.message||"An unknown error occurred"})}})}),getCurrentUser:async()=>new Promise(e=>{let t=n.getCurrentUser();if(!t){e(null);return}t.getSession((s,r)=>{if(s||!r||!r.isValid()){e(null);return}t.getUserAttributes((t,s)=>{if(t||!s){e(null);return}let r=s.find(e=>"email"===e.getName())?.getValue(),n=s.find(e=>"sub"===e.getName())?.getValue();if(!r||!n){e(null);return}e({email:r,sub:n,role:"user"})})})}),signOut:()=>{let e=n.getCurrentUser();e&&e.signOut()},getIdToken:async()=>new Promise(e=>{let t=n.getCurrentUser();if(!t){e(null);return}t.getSession((t,s)=>{if(t||!s||!s.isValid()){e(null);return}e(s.getIdToken().getJwtToken())})})}},9:(e,t,s)=>{"use strict";s.d(t,{F:()=>i});var r=s(8408),n=s(5251);let a="wss://i5csamj3a8.execute-api.us-east-1.amazonaws.com/prod",i=(0,r.U)()((0,n.mW)((e,t)=>({connectionStatus:"disconnected",ws:null,sessionId:null,myIdentity:null,participants:[],messages:[],sessionStartTime:null,timeRemaining:null,isSessionActive:!1,isRevealed:!1,identityReveal:null,connect:()=>{let s=t();if(s.ws?.readyState!==WebSocket.OPEN){e({connectionStatus:"connecting"}),console.log("Attempting WebSocket connection to:",a);try{let s=new WebSocket(a);s.onopen=()=>{console.log("✅ WebSocket connected successfully"),e({connectionStatus:"connected",ws:s}),console.log("Sending join message..."),s.send(JSON.stringify({action:"join"}))},s.onmessage=e=>{try{let s=JSON.parse(e.data);switch(console.log("\uD83D\uDCE8 Received:",s),s.action){case"connected":t().handleConnect(s);break;case"message":t().handleMessage(s);break;case"participants":t().handleParticipantUpdate(s.participants);break;case"session_end":t().handleSessionEnd(s.reveal);break;default:console.log("Unknown message:",s)}}catch(e){console.error("Failed to parse message:",e)}},s.onerror=t=>{console.error("❌ WebSocket error:",t),console.error("WebSocket readyState:",s.readyState),e({connectionStatus:"error"})},s.onclose=s=>{console.log("\uD83D\uDD0C WebSocket disconnected. Code:",s.code,"Reason:",s.reason),e({connectionStatus:"disconnected",ws:null}),1e3!==s.code&&(console.log("\uD83D\uDD04 Retrying connection in 3 seconds..."),setTimeout(()=>{let e=t();"disconnected"===e.connectionStatus&&e.connect()},3e3))},setTimeout(()=>{s.readyState===WebSocket.CONNECTING&&(console.error("⏰ WebSocket connection timeout"),s.close(),e({connectionStatus:"error"}))},1e4)}catch(t){console.error("\uD83D\uDCA5 Failed to create WebSocket:",t),e({connectionStatus:"error"})}}},disconnect:()=>{let{ws:s}=t();s&&s.close(),e({connectionStatus:"disconnected",ws:null})},sendMessage:e=>{let{ws:s}=t();s?.readyState===WebSocket.OPEN&&s.send(JSON.stringify({action:"message",content:e.trim()}))},handleConnect:t=>{e({myIdentity:t.identity,sessionId:t.sessionId,sessionStartTime:Date.now(),isSessionActive:!0,timeRemaining:600})},handleMessage:t=>{e(e=>({messages:[...e.messages,t]}))},handleParticipantUpdate:t=>{e({participants:t})},handleSessionEnd:t=>{e({isSessionActive:!1,isRevealed:!0,identityReveal:t,timeRemaining:0})},updateTimer:t=>{e({timeRemaining:t}),t<=0&&e({isSessionActive:!1})},reset:()=>{let{ws:s}=t();s&&s.close(),e({connectionStatus:"disconnected",ws:null,sessionId:null,myIdentity:null,participants:[],messages:[],sessionStartTime:null,timeRemaining:null,isSessionActive:!1,isRevealed:!1,identityReveal:null})}}),{name:"session-store"}))},2285:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s(9510);let n=(0,s(8570).createProxy)(String.raw`/Users/nico/src/amianai/v2/frontend/src/components/auth/SignUpForm.tsx#default`);function a(){return r.jsx(n,{})}},3817:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o,metadata:()=>i});var r=s(9510);s(5023);var n=s(8570);let a=(0,n.createProxy)(String.raw`/Users/nico/src/amianai/v2/frontend/src/contexts/AuthContext.tsx#AuthProvider`);(0,n.createProxy)(String.raw`/Users/nico/src/amianai/v2/frontend/src/contexts/AuthContext.tsx#useAuth`);let i={title:"AmIAnAI v2 - 2H+2AI Conversations",description:"Anonymous real-time conversations between 2 humans and 2 AIs"};function o({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:"antialiased",children:r.jsx(a,{children:e})})})}},5023:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[288,534,723],()=>s(953));module.exports=r})();