(()=>{var e={};e.id=409,e.ids=[409],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8893:e=>{"use strict";e.exports=require("buffer")},4770:e=>{"use strict";e.exports=require("crypto")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},7754:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>d,pages:()=>u,routeModule:()=>g,tree:()=>l}),n(7352),n(5866),n(3817);var s=n(3191),r=n(8716),o=n(7922),i=n.n(o),a=n(5231),c={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>a[e]);n.d(t,c);let l=["",{children:["/_not-found",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(n.t.bind(n,5866,23)),"next/dist/client/components/not-found-error"]}]},{}]},{layout:[()=>Promise.resolve().then(n.bind(n,3817)),"/Users/nico/src/amianai/v2/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(n.t.bind(n,5866,23)),"next/dist/client/components/not-found-error"]}],u=[],d="/_not-found/page",m={require:n,loadChunk:()=>Promise.resolve()},g=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/_not-found/page",pathname:"/_not-found",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},6407:(e,t,n)=>{Promise.resolve().then(n.t.bind(n,2994,23)),Promise.resolve().then(n.t.bind(n,6114,23)),Promise.resolve().then(n.t.bind(n,9727,23)),Promise.resolve().then(n.t.bind(n,9671,23)),Promise.resolve().then(n.t.bind(n,1868,23)),Promise.resolve().then(n.t.bind(n,4759,23))},5614:(e,t,n)=>{Promise.resolve().then(n.bind(n,4001))},4001:(e,t,n)=>{"use strict";n.d(t,{AuthProvider:()=>l,a:()=>u});var s=n(326),r=n(7577),o=n(5047),i=n(9580),a=n(9);let c=(0,r.createContext)(void 0),l=({children:e})=>{let[t,n]=(0,r.useState)(!1),[l,u]=(0,r.useState)(!0),[d,m]=(0,r.useState)(null),g=(0,o.useRouter)(),p=async()=>{try{let e=await i.Y.getCurrentUser();e?(n(!0),m(e)):(n(!1),m(null))}catch(e){n(!1),m(null)}finally{u(!1)}};return(0,r.useEffect)(()=>{p()},[]),s.jsx(c.Provider,{value:{isAuthenticated:t,isLoading:l,user:d,checkAuth:p,signOut:()=>{i.Y.signOut(),n(!1),m(null),a.F.getState().reset(),g.push("/auth/signin")}},children:e})},u=()=>{let e=(0,r.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},9580:(e,t,n)=>{"use strict";n.d(t,{Y:()=>o});var s=n(3541);let r=new s.AM({UserPoolId:"us-east-1_ipC2hJAsT",ClientId:"6mvdodv3vud2pi5sv0oig920ne"}),o={signUp:async({email:e,password:t})=>new Promise((n,o)=>{let i=[new s.KC({Name:"email",Value:e})];r.signUp(e,t,i,[],e=>{if(e){o({code:e.code||"UnknownError",message:e.message||"An unknown error occurred"});return}n()})}),confirmSignUp:async(e,t)=>new Promise((n,o)=>{new s.ws({Username:e,Pool:r}).confirmRegistration(t,!0,e=>{if(e){o({code:e.code||"UnknownError",message:e.message||"An unknown error occurred"});return}n()})}),signIn:async({email:e,password:t})=>new Promise((n,o)=>{let i=new s.sD({Username:e,Password:t});new s.ws({Username:e,Pool:r}).authenticateUser(i,{onSuccess:()=>{n()},onFailure:e=>{o({code:e.code||"UnknownError",message:e.message||"An unknown error occurred"})}})}),getCurrentUser:async()=>new Promise(e=>{let t=r.getCurrentUser();if(!t){e(null);return}t.getSession((n,s)=>{if(n||!s||!s.isValid()){e(null);return}t.getUserAttributes((t,n)=>{if(t||!n){e(null);return}let s=n.find(e=>"email"===e.getName())?.getValue(),r=n.find(e=>"sub"===e.getName())?.getValue();if(!s||!r){e(null);return}e({email:s,sub:r,role:"user"})})})}),signOut:()=>{let e=r.getCurrentUser();e&&e.signOut()},getIdToken:async()=>new Promise(e=>{let t=r.getCurrentUser();if(!t){e(null);return}t.getSession((t,n)=>{if(t||!n||!n.isValid()){e(null);return}e(n.getIdToken().getJwtToken())})})}},9:(e,t,n)=>{"use strict";n.d(t,{F:()=>i});var s=n(8408),r=n(5251);let o="wss://i5csamj3a8.execute-api.us-east-1.amazonaws.com/prod",i=(0,s.U)()((0,r.mW)((e,t)=>({connectionStatus:"disconnected",ws:null,sessionId:null,myIdentity:null,participants:[],messages:[],sessionStartTime:null,timeRemaining:null,isSessionActive:!1,isRevealed:!1,identityReveal:null,connect:()=>{let n=t();if(n.ws?.readyState!==WebSocket.OPEN){e({connectionStatus:"connecting"}),console.log("Attempting WebSocket connection to:",o);try{let n=new WebSocket(o);n.onopen=()=>{console.log("✅ WebSocket connected successfully"),e({connectionStatus:"connected",ws:n}),console.log("Sending join message..."),n.send(JSON.stringify({action:"join"}))},n.onmessage=e=>{try{let n=JSON.parse(e.data);switch(console.log("\uD83D\uDCE8 Received:",n),n.action){case"connected":t().handleConnect(n);break;case"message":t().handleMessage(n);break;case"participants":t().handleParticipantUpdate(n.participants);break;case"session_end":t().handleSessionEnd(n.reveal);break;default:console.log("Unknown message:",n)}}catch(e){console.error("Failed to parse message:",e)}},n.onerror=t=>{console.error("❌ WebSocket error:",t),console.error("WebSocket readyState:",n.readyState),e({connectionStatus:"error"})},n.onclose=n=>{console.log("\uD83D\uDD0C WebSocket disconnected. Code:",n.code,"Reason:",n.reason),e({connectionStatus:"disconnected",ws:null}),1e3!==n.code&&(console.log("\uD83D\uDD04 Retrying connection in 3 seconds..."),setTimeout(()=>{let e=t();"disconnected"===e.connectionStatus&&e.connect()},3e3))},setTimeout(()=>{n.readyState===WebSocket.CONNECTING&&(console.error("⏰ WebSocket connection timeout"),n.close(),e({connectionStatus:"error"}))},1e4)}catch(t){console.error("\uD83D\uDCA5 Failed to create WebSocket:",t),e({connectionStatus:"error"})}}},disconnect:()=>{let{ws:n}=t();n&&n.close(),e({connectionStatus:"disconnected",ws:null})},sendMessage:e=>{let{ws:n}=t();n?.readyState===WebSocket.OPEN&&n.send(JSON.stringify({action:"message",content:e.trim()}))},handleConnect:t=>{e({myIdentity:t.identity,sessionId:t.sessionId,sessionStartTime:Date.now(),isSessionActive:!0,timeRemaining:600})},handleMessage:t=>{e(e=>({messages:[...e.messages,t]}))},handleParticipantUpdate:t=>{e({participants:t})},handleSessionEnd:t=>{e({isSessionActive:!1,isRevealed:!0,identityReveal:t,timeRemaining:0})},updateTimer:t=>{e({timeRemaining:t}),t<=0&&e({isSessionActive:!1})},reset:()=>{let{ws:n}=t();n&&n.close(),e({connectionStatus:"disconnected",ws:null,sessionId:null,myIdentity:null,participants:[],messages:[],sessionStartTime:null,timeRemaining:null,isSessionActive:!1,isRevealed:!1,identityReveal:null})}}),{name:"session-store"}))},6399:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{isNotFoundError:function(){return r},notFound:function(){return s}});let n="NEXT_NOT_FOUND";function s(){let e=Error(n);throw e.digest=n,e}function r(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===n}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7352:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{PARALLEL_ROUTE_DEFAULT_PATH:function(){return r},default:function(){return o}});let s=n(6399),r="next/dist/client/components/parallel-route-default.js";function o(){(0,s.notFound)()}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3817:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a,metadata:()=>i});var s=n(9510);n(5023);var r=n(8570);let o=(0,r.createProxy)(String.raw`/Users/nico/src/amianai/v2/frontend/src/contexts/AuthContext.tsx#AuthProvider`);(0,r.createProxy)(String.raw`/Users/nico/src/amianai/v2/frontend/src/contexts/AuthContext.tsx#useAuth`);let i={title:"AmIAnAI v2 - 2H+2AI Conversations",description:"Anonymous real-time conversations between 2 humans and 2 AIs"};function a({children:e}){return s.jsx("html",{lang:"en",children:s.jsx("body",{className:"antialiased",children:s.jsx(o,{children:e})})})}},5023:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),s=t.X(0,[288],()=>n(7754));module.exports=s})();